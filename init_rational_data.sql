-- =====================================================
-- 理性消费功能数据初始化脚本
-- 包含：想要清单、消费预算、消费成就
-- =====================================================

USE shopping_mall;
SET NAMES utf8mb4;

-- 清空现有数据
DELETE FROM tb_consumption_achievement;
DELETE FROM tb_wishlist;
DELETE FROM tb_consumption_budget;

-- =====================================================
-- 第一部分：消费预算数据 (多个用户，多个月份)
-- =====================================================
INSERT INTO tb_consumption_budget (user_id, budget_month, monthly_budget, alert_threshold, alert_enabled, created_time, updated_time) VALUES
-- zhangsan (ID=2) - 理性消费达人，连续设置预算
(2, '202508', 3000.00, 80, 1, '2025-08-01 10:00:00', '2025-08-01 10:00:00'),
(2, '202509', 3000.00, 80, 1, '2025-09-01 09:30:00', '2025-09-01 09:30:00'),
(2, '202510', 3500.00, 75, 1, '2025-10-01 08:00:00', '2025-10-01 08:00:00'),
(2, '202511', 3500.00, 75, 1, '2025-11-01 10:15:00', '2025-11-01 10:15:00'),
(2, '202512', 4000.00, 80, 1, '2025-12-01 09:00:00', '2025-12-01 09:00:00'),
(2, '202601', 3500.00, 80, 1, '2026-01-01 10:00:00', '2026-01-01 10:00:00'),
-- lisi (ID=3) - 数码爱好者，预算较高
(3, '202509', 5000.00, 85, 1, '2025-09-05 14:00:00', '2025-09-05 14:00:00'),
(3, '202510', 5000.00, 85, 1, '2025-10-03 11:00:00', '2025-10-03 11:00:00'),
(3, '202511', 6000.00, 80, 1, '2025-11-02 16:00:00', '2025-11-02 16:00:00'),
(3, '202512', 8000.00, 70, 1, '2025-12-01 09:00:00', '2025-12-01 09:00:00'),
(3, '202601', 5000.00, 80, 1, '2026-01-02 10:30:00', '2026-01-02 10:30:00'),
-- wangwu (ID=4) - 时尚达人
(4, '202510', 4000.00, 80, 1, '2025-10-10 15:00:00', '2025-10-10 15:00:00'),
(4, '202511', 4500.00, 75, 1, '2025-11-05 12:00:00', '2025-11-05 12:00:00'),
(4, '202512', 5000.00, 80, 1, '2025-12-03 14:00:00', '2025-12-03 14:00:00'),
(4, '202601', 4000.00, 80, 1, '2026-01-04 09:00:00', '2026-01-04 09:00:00'),
-- zhaoliu (ID=5) - 美食爱好者，预算较低
(5, '202511', 1500.00, 90, 1, '2025-11-10 10:00:00', '2025-11-10 10:00:00'),
(5, '202512', 2000.00, 85, 1, '2025-12-08 11:00:00', '2025-12-08 11:00:00'),
(5, '202601', 1800.00, 85, 1, '2026-01-05 08:30:00', '2026-01-05 08:30:00'),
-- sunqi (ID=6) - 运动达人
(6, '202512', 2500.00, 80, 1, '2025-12-15 16:00:00', '2025-12-15 16:00:00'),
(6, '202601', 2500.00, 80, 1, '2026-01-06 10:00:00', '2026-01-06 10:00:00'),
-- xiaoming (ID=10) - 学生党，预算紧张
(10, '202511', 800.00, 90, 1, '2025-11-20 20:00:00', '2025-11-20 20:00:00'),
(10, '202512', 1000.00, 85, 1, '2025-12-10 19:00:00', '2025-12-10 19:00:00'),
(10, '202601', 1000.00, 85, 1, '2026-01-08 21:00:00', '2026-01-08 21:00:00'),
-- xiaohong (ID=11) - 白领丽人
(11, '202510', 3000.00, 80, 1, '2025-10-15 12:00:00', '2025-10-15 12:00:00'),
(11, '202511', 3500.00, 75, 1, '2025-11-12 13:00:00', '2025-11-12 13:00:00'),
(11, '202512', 4000.00, 80, 1, '2025-12-05 14:00:00', '2025-12-05 14:00:00'),
(11, '202601', 3500.00, 80, 1, '2026-01-03 11:00:00', '2026-01-03 11:00:00'),
-- daming (ID=12) - 程序员，高收入
(12, '202509', 6000.00, 70, 1, '2025-09-20 22:00:00', '2025-09-20 22:00:00'),
(12, '202510', 6000.00, 70, 1, '2025-10-18 21:00:00', '2025-10-18 21:00:00'),
(12, '202511', 7000.00, 75, 1, '2025-11-15 23:00:00', '2025-11-15 23:00:00'),
(12, '202512', 8000.00, 80, 1, '2025-12-12 20:00:00', '2025-12-12 20:00:00'),
(12, '202601', 6000.00, 80, 1, '2026-01-10 22:00:00', '2026-01-10 22:00:00'),
-- xiaoli (ID=13) - 全职妈妈
(13, '202512', 2000.00, 85, 1, '2025-12-20 10:00:00', '2025-12-20 10:00:00'),
(13, '202601', 2500.00, 80, 1, '2026-01-07 09:00:00', '2026-01-07 09:00:00'),
-- laowang (ID=14) - 退休教师
(14, '202511', 1500.00, 90, 1, '2025-11-25 08:00:00', '2025-11-25 08:00:00'),
(14, '202512', 2000.00, 85, 1, '2025-12-22 07:30:00', '2025-12-22 07:30:00'),
(14, '202601', 1800.00, 85, 1, '2026-01-09 08:00:00', '2026-01-09 08:00:00'),
-- chenchen (ID=16) - 大学生
(16, '202512', 600.00, 95, 1, '2025-12-25 15:00:00', '2025-12-25 15:00:00'),
(16, '202601', 800.00, 90, 1, '2026-01-11 14:00:00', '2026-01-11 14:00:00'),
-- linlin (ID=17) - 设计师
(17, '202511', 4000.00, 80, 1, '2025-11-28 17:00:00', '2025-11-28 17:00:00'),
(17, '202512', 5000.00, 75, 1, '2025-12-18 16:00:00', '2025-12-18 16:00:00'),
(17, '202601', 4500.00, 80, 1, '2026-01-06 18:00:00', '2026-01-06 18:00:00');


-- =====================================================
-- 第二部分：想要清单数据 (丰富的用户行为)
-- status: 0=冷静中, 1=可购买, 2=已购买, 3=已移除
-- =====================================================
INSERT INTO tb_wishlist (user_id, product_id, added_price, cooling_days, cooling_end_time, status, reason, created_time) VALUES
-- zhangsan (ID=2) - 理性消费典范
(2, 1, 9999.00, 7, '2025-10-08 10:00:00', 2, '想换新手机，但要考虑清楚', '2025-10-01 10:00:00'),
(2, 9, 14999.00, 7, '2025-10-22 15:00:00', 3, '工作需要新电脑', '2025-10-15 15:00:00'),
(2, 27, 1590.00, 3, '2025-11-08 11:00:00', 2, '护肤品快用完了', '2025-11-05 11:00:00'),
(2, 18, 4990.00, 5, '2025-12-10 14:00:00', 3, '家里需要吸尘器', '2025-12-05 14:00:00'),
(2, 8, 1899.00, 3, '2026-01-05 09:00:00', 2, '耳机坏了需要换', '2026-01-02 09:00:00'),
(2, 13, 799.00, 3, '2026-01-15 10:00:00', 1, '办公鼠标想升级', '2026-01-12 10:00:00'),
-- lisi (ID=3) - 数码爱好者，经常加入清单
(3, 2, 6999.00, 5, '2025-09-15 14:00:00', 2, '华为新机很心动', '2025-09-10 14:00:00'),
(3, 7, 9299.00, 7, '2025-10-12 16:00:00', 2, 'iPad Pro太香了', '2025-10-05 16:00:00'),
(3, 12, 15999.00, 7, '2025-11-10 20:00:00', 3, '想买个高端笔记本', '2025-11-03 20:00:00'),
(3, 6, 9699.00, 5, '2025-12-08 15:00:00', 2, '三星旗舰很不错', '2025-12-03 15:00:00'),
(3, 14, 7999.00, 5, '2026-01-08 21:00:00', 1, '想买个游戏本', '2026-01-03 21:00:00'),
(3, 11, 12999.00, 7, '2026-01-18 10:00:00', 0, '华为笔记本也不错', '2026-01-11 10:00:00'),
-- wangwu (ID=4) - 时尚达人
(4, 21, 899.00, 3, '2025-10-18 12:00:00', 2, '运动鞋该换了', '2025-10-15 12:00:00'),
(4, 25, 1999.00, 5, '2025-11-13 14:00:00', 2, '冬天需要羽绒服', '2025-11-08 14:00:00'),
(4, 24, 699.00, 3, '2025-12-05 16:00:00', 3, '牛仔裤看着不错', '2025-12-02 16:00:00'),
(4, 22, 1299.00, 3, '2025-12-20 11:00:00', 2, '跑步需要好鞋', '2025-12-17 11:00:00'),
(4, 26, 769.00, 3, '2026-01-10 15:00:00', 1, 'NB复古款很好看', '2026-01-07 15:00:00'),
-- zhaoliu (ID=5) - 美食爱好者
(5, 33, 168.00, 2, '2025-11-17 10:00:00', 2, '坚果健康零食', '2025-11-15 10:00:00'),
(5, 34, 128.00, 2, '2025-12-12 14:00:00', 2, '零食囤货', '2025-12-10 14:00:00'),
(5, 36, 79.90, 1, '2025-12-28 09:00:00', 3, '牛奶家里还有', '2025-12-27 09:00:00'),
(5, 35, 39.90, 1, '2026-01-08 08:00:00', 2, '矿泉水要囤', '2026-01-07 08:00:00'),
-- sunqi (ID=6) - 运动达人
(6, 21, 899.00, 3, '2025-12-20 17:00:00', 2, '跑步鞋磨损了', '2025-12-17 17:00:00'),
(6, 22, 1299.00, 5, '2026-01-05 16:00:00', 3, '想试试Boost', '2025-12-31 16:00:00'),
(6, 8, 1899.00, 3, '2026-01-12 18:00:00', 0, '运动时听歌用', '2026-01-09 18:00:00'),
-- xiaoming (ID=10) - 学生党，谨慎消费
(10, 3, 5999.00, 7, '2025-11-28 20:00:00', 3, '小米手机性价比高', '2025-11-21 20:00:00'),
(10, 8, 1899.00, 5, '2025-12-18 21:00:00', 3, '耳机太贵了放弃', '2025-12-13 21:00:00'),
(10, 23, 499.00, 3, '2025-12-28 19:00:00', 2, '冬天需要羽绒服', '2025-12-25 19:00:00'),
(10, 33, 168.00, 2, '2026-01-05 20:00:00', 2, '零食解馋', '2026-01-03 20:00:00'),
(10, 13, 799.00, 3, '2026-01-14 22:00:00', 0, '鼠标想升级', '2026-01-11 22:00:00'),
-- xiaohong (ID=11) - 白领丽人
(11, 27, 1590.00, 3, '2025-10-20 13:00:00', 2, 'SK-II神仙水必入', '2025-10-17 13:00:00'),
(11, 28, 1080.00, 3, '2025-11-18 14:00:00', 2, '小黑瓶精华补货', '2025-11-15 14:00:00'),
(11, 31, 320.00, 2, '2025-12-10 12:00:00', 2, 'YSL口红种草', '2025-12-08 12:00:00'),
(11, 29, 590.00, 3, '2025-12-25 15:00:00', 2, '眼霜快用完了', '2025-12-22 15:00:00'),
(11, 32, 350.00, 2, '2026-01-08 11:00:00', 1, '迪奥口红也想要', '2026-01-06 11:00:00'),
(11, 30, 890.00, 3, '2026-01-15 14:00:00', 0, '资生堂精华种草', '2026-01-12 14:00:00'),
-- daming (ID=12) - 程序员
(12, 9, 14999.00, 7, '2025-09-28 23:00:00', 2, 'MacBook工作必备', '2025-09-21 23:00:00'),
(12, 10, 9999.00, 7, '2025-10-25 22:00:00', 3, 'ThinkPad也不错', '2025-10-18 22:00:00'),
(12, 13, 799.00, 3, '2025-11-20 21:00:00', 2, '办公鼠标升级', '2025-11-17 21:00:00'),
(12, 18, 4990.00, 5, '2025-12-20 20:00:00', 2, '戴森吸尘器真香', '2025-12-15 20:00:00'),
(12, 7, 9299.00, 5, '2026-01-10 23:00:00', 1, 'iPad Pro画图用', '2026-01-05 23:00:00'),
-- xiaoli (ID=13) - 全职妈妈
(13, 15, 4599.00, 7, '2025-12-28 10:00:00', 3, '冰箱想换大的', '2025-12-21 10:00:00'),
(13, 17, 4299.00, 7, '2026-01-08 11:00:00', 3, '洗衣机考虑中', '2026-01-01 11:00:00'),
(13, 36, 79.90, 1, '2026-01-05 09:00:00', 2, '牛奶给孩子喝', '2026-01-04 09:00:00'),
(13, 33, 168.00, 2, '2026-01-12 10:00:00', 0, '坚果健康零食', '2026-01-10 10:00:00'),
-- laowang (ID=14) - 退休教师
(14, 19, 3999.00, 7, '2025-12-05 08:00:00', 3, '电视想换大的', '2025-11-28 08:00:00'),
(14, 35, 39.90, 1, '2025-12-25 07:00:00', 2, '矿泉水日常用', '2025-12-24 07:00:00'),
(14, 36, 79.90, 1, '2026-01-05 08:00:00', 2, '牛奶补钙', '2026-01-04 08:00:00'),
(14, 34, 128.00, 2, '2026-01-12 09:00:00', 0, '零食给孙子', '2026-01-10 09:00:00'),
-- chenchen (ID=16) - 大学生
(16, 3, 5999.00, 7, '2026-01-02 15:00:00', 3, '手机太贵放弃', '2025-12-26 15:00:00'),
(16, 23, 499.00, 3, '2026-01-08 16:00:00', 2, '羽绒服刚需', '2026-01-05 16:00:00'),
(16, 33, 168.00, 2, '2026-01-13 14:00:00', 0, '零食解馋', '2026-01-11 14:00:00'),
-- linlin (ID=17) - 设计师
(17, 11, 12999.00, 7, '2025-12-05 17:00:00', 2, '设计需要好电脑', '2025-11-28 17:00:00'),
(17, 7, 9299.00, 5, '2025-12-25 18:00:00', 2, 'iPad Pro画图', '2025-12-20 18:00:00'),
(17, 31, 320.00, 2, '2026-01-05 16:00:00', 2, '口红日常需要', '2026-01-03 16:00:00'),
(17, 28, 1080.00, 3, '2026-01-12 17:00:00', 0, '精华液种草', '2026-01-09 17:00:00'),
-- yangyang (ID=18) - 销售经理
(18, 1, 9999.00, 5, '2025-12-10 09:00:00', 2, '商务手机升级', '2025-12-05 09:00:00'),
(18, 10, 9999.00, 7, '2025-12-28 10:00:00', 3, '笔记本考虑中', '2025-12-21 10:00:00'),
(18, 8, 1899.00, 3, '2026-01-08 11:00:00', 1, '耳机出差用', '2026-01-05 11:00:00'),
-- huihui (ID=19) - 医生
(19, 27, 1590.00, 3, '2025-12-15 20:00:00', 2, '护肤品补货', '2025-12-12 20:00:00'),
(19, 29, 590.00, 3, '2026-01-05 21:00:00', 2, '眼霜熬夜必备', '2026-01-02 21:00:00'),
(19, 18, 4990.00, 5, '2026-01-15 19:00:00', 0, '吸尘器想买', '2026-01-10 19:00:00'),
-- mingming (ID=20) - 工程师
(20, 9, 14999.00, 7, '2025-11-15 22:00:00', 2, 'MacBook工作用', '2025-11-08 22:00:00'),
(20, 13, 799.00, 3, '2025-12-08 21:00:00', 2, '鼠标升级', '2025-12-05 21:00:00'),
(20, 18, 4990.00, 5, '2025-12-28 20:00:00', 3, '吸尘器太贵', '2025-12-23 20:00:00'),
(20, 14, 7999.00, 5, '2026-01-12 23:00:00', 0, '游戏本想买', '2026-01-07 23:00:00');


-- =====================================================
-- 第三部分：消费成就数据 (多样化的成就分布)
-- =====================================================
INSERT INTO tb_consumption_achievement (user_id, achievement_type, achievement_name, achievement_desc, achieved_time) VALUES
-- FIRST_WISHLIST - 理性第一步 (首次使用想要清单)
(2, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-10-01 10:05:00'),
(3, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-09-10 14:05:00'),
(4, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-10-15 12:05:00'),
(5, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-11-15 10:05:00'),
(6, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-12-17 17:05:00'),
(10, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-11-21 20:05:00'),
(11, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-10-17 13:05:00'),
(12, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-09-21 23:05:00'),
(13, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-12-21 10:05:00'),
(14, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-11-28 08:05:00'),
(16, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-12-26 15:05:00'),
(17, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-11-28 17:05:00'),
(18, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-12-05 09:05:00'),
(19, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-12-12 20:05:00'),
(20, 'FIRST_WISHLIST', '理性第一步', '首次使用想要清单', '2025-11-08 22:05:00'),
-- DELAYED_GRATIFICATION_3 - 延迟满足达人 (通过想要清单购买3件商品)
(2, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2025-11-10 16:30:00'),
(3, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2025-12-10 09:30:00'),
(4, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2025-12-22 14:30:00'),
(5, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2026-01-09 10:30:00'),
(11, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2025-12-11 15:30:00'),
(12, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2025-12-22 11:30:00'),
(17, 'DELAYED_GRATIFICATION_3', '延迟满足达人', '通过想要清单购买3件商品', '2026-01-06 14:30:00'),
-- RATIONAL_GIVEUP_5 - 理性放弃者 (从想要清单移除5件商品)
(2, 'RATIONAL_GIVEUP_5', '理性放弃者', '从想要清单移除5件商品', '2025-12-12 10:30:00'),
(10, 'RATIONAL_GIVEUP_5', '理性放弃者', '从想要清单移除5件商品', '2025-12-20 10:30:00'),
-- BUDGET_MASTER - 预算大师 (连续3个月未超预算)
(2, 'BUDGET_MASTER', '预算大师', '连续3个月未超预算', '2025-12-01 10:00:00'),
(3, 'BUDGET_MASTER', '预算大师', '连续3个月未超预算', '2025-12-05 14:00:00'),
(11, 'BUDGET_MASTER', '预算大师', '连续3个月未超预算', '2026-01-03 11:30:00'),
(12, 'BUDGET_MASTER', '预算大师', '连续3个月未超预算', '2025-12-15 20:00:00'),
-- SAVING_STAR - 节约之星 (单月节省超过500元)
(2, 'SAVING_STAR', '节约之星', '单月节省超过500元', '2025-11-30 23:59:00'),
(3, 'SAVING_STAR', '节约之星', '单月节省超过500元', '2025-10-31 23:59:00'),
(4, 'SAVING_STAR', '节约之星', '单月节省超过500元', '2025-12-31 23:59:00'),
(12, 'SAVING_STAR', '节约之星', '单月节省超过500元', '2025-11-30 23:59:00'),
(17, 'SAVING_STAR', '节约之星', '单月节省超过500元', '2025-12-31 23:59:00'),
-- RATIONAL_100 - 理性消费达人 (理性指数达到100分)
(2, 'RATIONAL_100', '理性消费达人', '理性指数达到100分', '2026-01-01 00:00:00'),
(12, 'RATIONAL_100', '理性消费达人', '理性指数达到100分', '2026-01-05 10:00:00');

-- =====================================================
-- 验证数据
-- =====================================================
SELECT '消费预算数据' AS data_type, COUNT(*) AS count FROM tb_consumption_budget
UNION ALL
SELECT '想要清单数据', COUNT(*) FROM tb_wishlist
UNION ALL
SELECT '消费成就数据', COUNT(*) FROM tb_consumption_achievement;

-- 统计各状态的想要清单数量
SELECT 
    CASE status 
        WHEN 0 THEN '冷静中'
        WHEN 1 THEN '可购买'
        WHEN 2 THEN '已购买'
        WHEN 3 THEN '已移除'
    END AS status_name,
    COUNT(*) AS count
FROM tb_wishlist
GROUP BY status;

-- 统计各成就类型的获得人数
SELECT 
    achievement_name,
    COUNT(*) AS user_count
FROM tb_consumption_achievement
GROUP BY achievement_type, achievement_name
ORDER BY COUNT(*) DESC;
